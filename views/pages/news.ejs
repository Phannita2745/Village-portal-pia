<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title><%= title %></title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Tailwind -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <!-- custom style (‡∏Ñ‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°‡πÑ‡∏ß‡πâ‡πÑ‡∏î‡πâ) -->
  <link rel="stylesheet" href="/css/style.css">
</head>
<body class="bg-blue-50">
  <%- include('../partials/navbar') %>

  <!-- ‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏Ç‡∏∂‡πâ‡∏ô ‡πÅ‡∏•‡∏∞‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏ã‡πâ‡∏≤‡∏¢‡∏Ç‡∏ß‡∏≤‡πÉ‡∏´‡πâ‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏™‡πâ‡∏ô‡πÅ‡∏î‡∏á -->
  <main class="pt-20 mx-auto w-full max-w-7xl px-6 lg:px-16 xl:px-24 py-6">
    <section class="rounded-2xl overflow-hidden shadow-sm border">
      <!-- Search + Filter -->
      <section class="mt-6 mb-6"> <!-- üëà mt-6 = ‡πÄ‡∏ß‡πâ‡∏ô‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å navbar -->
        <form action="/news" method="get" 
              class="flex flex-col sm:flex-row items-stretch gap-4">
          
          <!-- ‡∏ä‡πà‡∏≠‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ -->
          <div class="flex-1">
            <div class="relative">
              <span class="absolute left-3 top-1/2 -translate-y-1/2 mt-1 text-gray-400">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M21 21l-4.35-4.35m0 0A7.5 7.5 0 103.5 3.5a7.5 7.5 0 0013.15 13.15z" />
                </svg>
              </span>
              <input
                type="text"
                name="q"
                value="<%= typeof q !== 'undefined' ? q : '' %>"
                placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤..."
                class="w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-emerald-400 focus:border-emerald-400 transition"
              />
            </div>
          </div>

          <!-- ‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á -->
          <div class="sm:w-56">
            <select
              name="sort"
              class="w-full rounded-lg border border-gray-300 py-2 px-3 bg-white shadow-sm focus:ring-2 focus:ring-emerald-400 focus:border-emerald-400 transition text-center"
            >
              <option value="oldest" <%= sort==='oldest' ? 'selected' : '' %>>‡πÄ‡∏Å‡πà‡∏≤‡∏™‡∏∏‡∏î ‚Üí ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</option>
              <option value="latest" <%= (!sort || sort==='latest') ? 'selected' : '' %>>‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î ‚Üí ‡πÄ‡∏Å‡πà‡∏≤‡∏™‡∏∏‡∏î</option>
              <option value="popular" <%= sort==='popular' ? 'selected' : '' %>>‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°</option>
            </select>
          </div>

          <!-- ‡∏õ‡∏∏‡πà‡∏° (‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏á‡πà‡∏≤‡∏¢‡πÅ‡∏ö‡∏ö‡πÄ‡∏Å‡πà‡∏≤) -->
          <div class="sm:w-32">
            <button
              type="submit"
              class="w-full bg-white text-green-600 font-semibold rounded-lg py-2 border shadow hover:bg-gray-50 transition"
            >
              ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
            </button>
          </div>
        </form>
      </section>


      <!-- ‡∏´‡∏±‡∏ß‡πÅ‡∏ñ‡∏ö‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß -->
      <div class="bg-green-600 text-white px-6 py-3">
        <h1 class="font-semibold text-lg">‡∏Ç‡πà‡∏≤‡∏ß‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå</h1>
      </div>

      <!-- ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡πà‡∏≤‡∏ß -->
      <div class="bg-white">
        <ul class="divide-y">
          <% (items || []).forEach(function(it){ %>
            <li>
              <a href="/news/<%= it.id %>" class="block px-6 py-5 hover:bg-gray-50 transition">
                <div class="flex items-start gap-5">
                  <!-- ‡∏£‡∏π‡∏õ‡∏Ç‡πà‡∏≤‡∏ß: ‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á‡∏î‡∏µ‡πÑ‡∏ã‡∏ô‡πå -->
                  <div class="w-56 flex-shrink-0">
                    <div class="w-full h-44 bg-gray-100 rounded overflow-hidden border">
                      <img
                        src="<%= it.image ? '/uploads/' + it.image : '/default.jpg' %>"
                        alt="<%= it.title %>"
                        class="w-full h-full object-cover" />
                    </div>
                  </div>

                  <!-- ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ -->
                  <div class="flex-1 min-w-0">
                    <h3 class="text-gray-900 font-medium text-base sm:text-lg leading-snug">
                      <%= it.title %>
                    </h3>

                    <% 
                      const text = it.summary || it.content || '';
                      const preview = text && text.length > 140 ? text.substring(0,140) + '‚Ä¶' : text;
                    %>
                    <% if (preview) { %>
                      <p class="text-sm text-gray-700 mt-1"><%= preview %></p>
                    <% } %>

                    <div class="text-sm text-green-600 mt-2 flex items-center">
                      <span class="inline-block w-2 h-2 rounded-full bg-green-600 mr-2"></span>
                      <%= it.displayDate %>
                    </div>
                  </div>
                </div>
              </a>
            </li>
          <% }) %>
        </ul>
      </div>

      <!-- ‡πÄ‡∏û‡∏à‡∏à‡∏¥‡πÄ‡∏ô‡∏ä‡∏±‡∏ô (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ) -->
      <div class="bg-white px-6 pb-5 pt-3">
        <% if (typeof pagination !== 'undefined') { %>
          <nav class="flex justify-center gap-2 text-sm">
            <% if (pagination.prev) { %>
              <a class="px-3 py-1 border rounded hover:bg-gray-50" href="<%= pagination.prev %>">‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤</a>
            <% } %>
            <% (pagination.pages || []).forEach(function(p){ %>
              <a class="px-3 py-1 border rounded hover:bg-gray-50 <%= p.active ? 'bg-gray-100' : '' %>" href="<%= p.href %>"><%= p.label %></a>
            <% }) %>
            <% if (pagination.next) { %>
              <a class="px-3 py-1 border rounded hover:bg-gray-50" href="<%= pagination.next %>">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</a>
            <% } %>
          </nav>
        <% } else { %>
          <!-- ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏õ‡∏∏‡πà‡∏°‡∏á‡πà‡∏≤‡∏¢ ‡πÜ (‡∏•‡∏ö‡πÑ‡∏î‡πâ‡∏´‡∏≤‡∏Å‡∏ú‡∏π‡∏Å‡πÄ‡∏û‡∏à‡∏à‡∏£‡∏¥‡∏á‡πÅ‡∏•‡πâ‡∏ß) -->
          <nav class="flex justify-center gap-2 text-sm">
            <a class="px-3 py-1 border rounded hover:bg-gray-50" href="?page=1">1</a>
            <a class="px-3 py-1 border rounded hover:bg-gray-50" href="?page=2">2</a>
            <a class="px-3 py-1 border rounded hover:bg-gray-50" href="?page=3">3</a>
          </nav>
        <% } %>
      </div>
    </section>
  </main>

  <%- include('../partials/footer') %>
</body>
</html>
